# MediMatch - AI 기반 증상 분석 및 전문 병원 매칭 MCP 서버

> 증상을 말하면, 진짜 그 질환을 진료하는 병원을 찾아드립니다.

## 🎯 문제 정의

기존 병원 검색 서비스의 한계:
- "피부과" 검색 → 미용/케어 위주 피부과도 모두 노출
- "아토피" 검색 → 피부과 전체 노출 (실제 아토피 전문 진료 여부 불명확)
- 원하는 질환을 전문으로 진료하는 병원 찾기 어려움

## 💡 솔루션

**MediMatch**는 AI 기반 증상 분석으로 **실제 해당 질환을 전문으로 진료하는 병원**을 매칭해드립니다.

```
사용자: "팔꿈치 안쪽이 가렵고 각질이 일어나는데, 어릴 때 아토피 있었어요"

MediMatch: 증상 분석 결과, 성인 아토피 재발 가능성이 있습니다.

🏥 추천 진료과: 피부과
🔍 검색 키워드: 아토피, 알레르기, 면역피부

[서울 지역 아토피 전문 피부과 5곳]
1. OO피부과의원 - 전문의 2명
2. XX알레르기피부과 - 전문의 3명
...

📍 카카오맵에서 위치 확인 및 길찾기 가능!
```

## 🛠 기능

### 1. `analyze_symptoms` - 증상 분석
자연어로 증상을 설명하면 적절한 진료과목 추천

### 2. `search_hospitals` - 병원 검색
진료과목 + 지역 기반 병원 검색 (공공데이터 활용)

### 3. `find_specialist_hospital` - 전문 병원 매칭
증상/질환명 → 해당 질환 전문 병원 원스톱 검색

### 4. `search_nearby_hospitals` - 주변 병원 검색 (NEW)
현재 위치 기반 주변 병원 검색 (카카오맵 연동)

### 5. `search_nearby_with_pharmacy` - 병원+약국 검색 (NEW)
주변 병원과 약국을 함께 검색

### 6. `search_specialist_with_kakao` - 카카오맵 전문병원 검색 (NEW)
카카오맵에서 특정 질환 전문 병원 검색 (리뷰, 상세정보 포함)

### 7. `get_available_departments` - 진료과목 목록
### 8. `get_available_regions` - 지역 목록

## 🚀 설치 및 실행

### 1. 의존성 설치
```bash
cd mcp-hospital-finder
pip install -r requirements.txt
```

### 2. 환경변수 설정
```bash
cp .env.example .env
# .env 파일 편집
```

### 3. API 키 발급

**필수: 공공데이터포털 API 키**
- [건강보험심사평가원 병원정보서비스](https://www.data.go.kr/data/15001698/openapi.do)에서 API 키 발급

**선택: 카카오 REST API 키** (위치 기반 기능 사용 시)
- [카카오 개발자](https://developers.kakao.com)에서 애플리케이션 등록
- 앱 키 > REST API 키 복사

### 4. 서버 실행
```bash
python server.py
```

서버가 `http://0.0.0.0:8000/mcp` 에서 실행됩니다.

## 📋 PlayMCP 등록 정보

| 항목 | 내용 |
|------|------|
| **MCP 이름** | MediMatch |
| **MCP 식별자** | mediMatch |
| **MCP 설명** | AI 기반 증상 분석으로 내 질환을 전문으로 진료하는 병원을 찾아주는 서비스입니다. "피부과"가 아닌 "아토피 전문 피부과"를 찾아드립니다. 카카오맵 연동으로 위치 확인 및 길찾기도 가능합니다. |
| **MCP Endpoint** | https://your-server.com/mcp |
| **인증 방식** | 인증 사용하지 않음 |

### 대화 예시
1. "팔꿈치가 가렵고 각질이 일어나요. 어떤 병원 가야 해요?"
2. "서울에서 아토피 전문 피부과 찾아줘"
3. "허리가 아프고 다리가 저린데 어디로 가야 하나요?"
4. "내 주변 피부과랑 약국 찾아줘"
5. "강남에서 당뇨 전문 병원 검색해줘"

## 🔗 연동 가능한 카카오 MCP

- **카카오맵 MCP**: 병원 위치 및 경로 안내 (자체 연동)
- **카카오톡 나챗방 MCP**: 검색 결과 저장
- **톡캘린더 MCP**: 진료 예약 일정 등록

## 📊 지원 데이터

- **진료과목**: 49개 (내과, 피부과, 정형외과, 치과 등)
- **지역**: 17개 시/도
- **증상 매핑**: 100+ 증상-진료과목 매핑
- **카카오맵 연동**: 병원/약국 위치, 길찾기 URL

## 🏗 기술 스택

- **MCP Framework**: FastMCP
- **Transport**: Streamable HTTP
- **데이터 소스**:
  - 건강보험심사평가원 병원정보서비스 API (공공데이터)
  - 카카오 로컬 API (위치 기반)
- **Language**: Python 3.10+

## 📄 라이선스

MIT License
